<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WEN MONITOR - Live Tracking</title>
    <link rel="stylesheet" href="web_dashboard.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700;800&family=Share+Tech+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="terminal-container">
      <!-- Terminal Header -->
      <div class="terminal-header">
        <div class="terminal-title">WEN MONITOR</div>
        <div class="terminal-subtitle">LIVE TRACKING</div>
      </div>

      <!-- Main WEN Display -->
      <div class="wen-display">
        <div class="wen-label">WEN COUNT:</div>
        <div class="wen-number" id="wenCount">0</div>
        <div class="wen-trend" id="trendIndicator">üìà</div>
      </div>

      <!-- Info Grid -->
      <div class="info-grid">
        <!-- Summary Panel -->
        <div class="info-panel">
          <div class="panel-header">SUMMARY:</div>
          <div class="panel-content">
            <div class="info-line">
              <span class="label">Messages analyzed:</span>
              <span class="value" id="messagesAnalyzed">0</span>
            </div>
            <div class="info-line">
              <span class="label">Messages with WEN:</span>
              <span class="value" id="messagesWithWen">0</span>
            </div>
            <div class="info-line">
              <span class="label">Message timespan:</span>
              <span class="value" id="messageTimespan">0 minutes</span>
            </div>
          </div>
        </div>

        <!-- Monitor Status Panel -->
        <div class="info-panel">
          <div class="panel-header">MONITOR STATUS:</div>
          <div class="panel-content">
            <div class="info-line">
              <span class="label">Update interval:</span>
              <span class="value" id="updateInterval">5s</span>
            </div>
            <div class="info-line">
              <span class="label">Updates so far:</span>
              <span class="value" id="updatesSoFar">0</span>
            </div>
            <div class="info-line">
              <span class="label">Running time:</span>
              <span class="value" id="runningTime">00:00</span>
            </div>
            <div class="info-line">
              <span class="label">Last update:</span>
              <span class="value" id="lastUpdate">--:--:-- UTC</span>
            </div>
            <div class="info-line" id="todayFilterItem" style="display: none">
              <span class="label">Filter:</span>
              <span class="value today-filter">TODAY ONLY</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Messages -->
      <div class="messages-panel">
        <div class="panel-header">
          <span class="flame">üî•</span>
          RECENT WEN MESSAGES:
        </div>
        <div id="recentMessages" class="messages-list">
          <div class="no-messages">No WEN messages found yet...</div>
        </div>
      </div>

      <!-- Configuration -->
      <div class="config-panel">
        <div class="panel-header">CONFIGURATION:</div>
        <div class="config-grid">
          <div class="config-row">
            <label for="apiUrl">API URL:</label>
            <input
              type="text"
              id="apiUrl"
              placeholder="https://client.farcaster.xyz/v2/..."
              class="config-input"
            />
          </div>
          <div class="config-row">
            <label for="bearerToken">Bearer Token:</label>
            <input
              type="password"
              id="bearerToken"
              placeholder="MK-..."
              class="config-input"
            />
          </div>
          <div class="config-row">
            <label for="fetchModeSelect">Fetch Mode:</label>
            <select id="fetchModeSelect" class="config-select">
              <option value="single">Single Page</option>
              <option value="recent">Recent Messages</option>
              <option value="all">All Messages</option>
            </select>
          </div>
          <div class="config-row">
            <label for="maxPages">Max Pages:</label>
            <input
              type="number"
              id="maxPages"
              value="5"
              min="1"
              max="100"
              class="config-input"
            />
          </div>
          <div class="config-row">
            <label for="targetHours">Target Hours:</label>
            <input
              type="number"
              id="targetHours"
              value="24"
              min="1"
              max="168"
              class="config-input"
            />
          </div>
          <div class="config-row">
            <label for="updateIntervalSelect">Update Interval:</label>
            <select id="updateIntervalSelect" class="config-select">
              <option value="30">30 seconds</option>
              <option value="60">1 minute</option>
              <option value="300" selected>5 minutes</option>
              <option value="900">15 minutes</option>
              <option value="3600">1 hour</option>
            </select>
          </div>
          <div class="config-row">
            <label class="checkbox-label">
              <input type="checkbox" id="todayFilter" class="config-checkbox" />
              <span class="checkmark"></span>
              Today Only Filter
            </label>
          </div>
        </div>
        <div class="button-row">
          <button id="startMonitor" class="btn btn-start">
            üöÄ Start Monitor
          </button>
          <button id="stopMonitor" class="btn btn-stop" disabled>
            ‚èπÔ∏è Stop Monitor
          </button>
          <button id="testConnection" class="btn btn-test">
            üß™ Test Connection
          </button>
        </div>
      </div>

      <!-- Status Bar -->
      <div class="status-bar">
        <div class="status-item">
          <span class="status-label">Status:</span>
          <span class="status-value" id="connectionStatus">Disconnected</span>
        </div>
        <div class="status-item">
          <span class="status-label">Next Update:</span>
          <span class="status-value" id="nextUpdate">--:--:--</span>
        </div>
      </div>

      <!-- Footer -->
      <div class="footer">Press Ctrl+C to stop monitoring</div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none">
      <div class="loading-content">
        <div class="spinner"></div>
        <p>Fetching WEN data...</p>
      </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal" style="display: none">
      <div class="modal-content">
        <h3>‚ùå Error</h3>
        <p id="errorMessage"></p>
        <button class="btn btn-start" onclick="closeErrorModal()">OK</button>
      </div>
    </div>

    <script src="web_dashboard.js"></script>
  </body>
</html>
